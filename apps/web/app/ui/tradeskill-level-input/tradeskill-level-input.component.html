<div class="flex-1 relative">
  <picture class="opacity-20 absolute top-0 left-0 right-0 bottom-0 flex items-center justify-center">
    <img [nwImage]="icon" class="w-3/5 h-3/5 object-contain" />
  </picture>
  <div class="absolute top-0 left-0 right-0 bottom-0 z-10 flex flex-col items-center justify-center">
    <div class="aspect-square h-full font-caslon">
      <input
        #input
        min="0"
        type="number"
        [attr.max]="maxLevel"
        class="
          input
          focus:outline-none
          bg-transparent
          h-full
          w-full
          p-0
          text-center
          font-bold
          text-3xl
          appearance-none
          cursor-pointer
        "
        placeholder="0"
        [(ngModel)]="modelValue"
        (focus)="isSliderOpen = true"
      />
    </div>
  </div>
</div>
<h2 class="p-2 pt-0 text-center font-bold text-lg text-ellipsis overflow-hidden">
  <span [nwText]="label" class="whitespace-nowrap"></span>
</h2>

<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="cdkOrigin"
  [cdkConnectedOverlayOpen]="isSliderOpen"
  [cdkConnectedOverlayHasBackdrop]="false"
  [cdkConnectedOverlayPositions]="[
    { originX: 'start', originY: 'bottom', overlayX: 'start', overlayY: 'top', offsetY: 2 },
    { originX: 'center', originY: 'bottom', overlayX: 'center', overlayY: 'top', offsetY: 2 },
    { originX: 'end', originY: 'bottom', overlayX: 'end', overlayY: 'top', offsetY: 2 }
  ]"
  [cdkConnectedOverlayPanelClass]="['bg-base-100', 'bg-opacity-75', 'rounded-md', 'shadow-md', 'p-2']"
  (overlayOutsideClick)="onOutsideClick()"
  (backdropClick)="isSliderOpen = false"
  (detach)="isSliderOpen = false"
>
  <nwb-input-slider
    [(ngModel)]="modelValue"
    [min]="0"
    [max]="maxLevelValue"
    [bars]="true"
    [barsStep]="50"
    [values]="true"
    class="block w-96"
  />
</ng-template>
