@if (gearset) {
  <nwb-gearset-loadout [geasrsetId]="gearset.id" [buttonTemplate]="tplButton">
    <ng-template #tplButton>
      <div class="join w-full">
        <button class="join-item flex-1 btn btn-sm btn-ghost btn-square" [cdkMenuTriggerFor]="menu">
          <nwb-icon [icon]="iconMenu" class="w-4 h-4"/>
        </button>
        <a
          class="join-item flex-1 btn btn-sm btn-ghost btn-square inline-flex"
          [routerLink]="['/gearsets', gearset.id]"
          [tooltip]="'Open full editor'"
          [tooltipClass]="'bg-info'"
        >
          <nwb-icon [icon]="iconNav" class="w-4 h-4"/>
        </a>
      </div>
    </ng-template>
  </nwb-gearset-loadout>
} @else {
  <div class="max-w-md mx-auto layout-col layout-gap layout-pad-y h-full items-center justify-center">
    <button class="btn btn-primary w-full" (click)="loadSet()">
      <nwb-icon [icon]="iconOpen" class="w-4 h-4 mr-2"/>
      Open existing set
    </button>
    <button class="btn btn-primary w-full" (click)="createSet()">
      <nwb-icon [icon]="iconCreate" class="w-4 h-4 mr-2"/>
      Create new set
    </button>
  </div>
}

<ng-template #menu>
  <ul class="menu menu-compact bg-base-100 rounded-md w-80" cdkMenu>
    <li class="text-shadow-sm shadow-black">
      <a (click)="createSet()" cdkMenuItem>
        <nwb-icon [icon]="iconCreate" class="w-4 h-4"/>
        <div class="flex flex-col leading-none">
          <span>Create New</span>
          <span class="text-xs opacity-75">Create a new set and start editing</span>
        </div>
      </a>
    </li>
    <li class="text-shadow-sm shadow-black">
      <a (click)="loadSet()" cdkMenuItem>
        <nwb-icon [icon]="iconOpen" class="w-4 h-4"/>
        <div class="flex flex-col leading-none">
          <span>Open</span>
          <span class="text-xs opacity-75">Open another set to edit</span>
        </div>
      </a>
    </li>
    <!-- <li class="text-shadow-sm shadow-black">
      <a cdkMenuItem>
        <nwb-icon [icon]="iconCopy" class="w-4 h-4"/>
        <div class="flex flex-col leading-none">
          <span>Clone</span>
          <span class="text-xs opacity-75">Make a copy of this set and start editing</span>
        </div>
      </a>
    </li> -->

    <li class="menu-title">
      <span>Item Mode</span>
    </li>
    <li [class.bordered]="isLinkMode" cdkMenuItem>
      <a (click)="updateMode('link')" cdkMenuItem>
        <nwb-icon [icon]="iconLink" class="w-4 h-4"/>
        <div class="flex flex-col leading-none">
          <span>Link Mode</span>
          <span class="text-xs opacity-75">
            Inventory items are <span class="text-primary">linked</span> when slotted
          </span>
        </div>
      </a>
    </li>
    <li [class.bordered]="isCopyMode" cdkMenuItem>
      <a (click)="updateMode('copy')" cdkMenuItem>
        <nwb-icon [icon]="iconCopy" class="w-4 h-4"/>
        <div class="flex flex-col leading-none">
          <span>Copy Mode</span>
          <span class="text-xs opacity-75">
            Inventory items are <span class="text-primary">copied</span> when slotted
          </span>
        </div>
      </a>
    </li>

    <li class="divider"></li>
    <li class="text-shadow-sm shadow-black">
      <a (click)="unloadSet()" cdkMenuItem>
        <nwb-icon [icon]="iconClose" class="w-4 h-4"/>
        <div class="flex flex-col leading-none">
          <span>Close</span>
          <span class="text-xs opacity-75">Close this set and exit editor</span>
        </div>
      </a>
    </li>
    <li class="text-shadow-sm shadow-black">
      <a (click)="unloadSet()" cdkMenuItem>
        <nwb-icon [icon]="iconDelete" class="w-4 h-4 text-error"/>
        <div class="flex flex-col leading-none">
          <span>Delete</span>
          <span class="text-xs opacity-75">Delete this set</span>
        </div>
      </a>
    </li>
  </ul>
</ng-template>
